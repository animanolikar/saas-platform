<div class="d-flex w-100 vh-100 overflow-hidden">
  <!-- Desktop Sidebar (Hidden on Mobile) -->
  <div class="d-none d-lg-flex flex-column flex-shrink-0 p-3 text-white sidebar-glass" style="width: 280px;">
    <ng-container *ngTemplateOutlet="sidebarContent"></ng-container>
  </div>

  <!-- Mobile Sidebar (Offcanvas) -->
  <div class="offcanvas offcanvas-start text-white sidebar-glass" tabindex="-1" id="mobileSidebar"
    aria-labelledby="mobileSidebarLabel" style="width: 280px; border: none;">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title fw-bold" id="mobileSidebarLabel">Menu</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-3 pt-0">
      <ng-container *ngTemplateOutlet="sidebarContent"></ng-container>
    </div>
  </div>

  <!-- Shared Sidebar Content Template -->
  <ng-template #sidebarContent>
    <a href="/" class="d-flex align-items-center justify-content-center mb-4 text-decoration-none">
      <svg width="180" height="50" viewBox="0 0 220 56" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14 40.5V31.2L3 18.8H9.4L16.9 27.8L24.5 18.8H30.8L19.9 31.2 V40.5H14Z" fill="#E10600" />
        <path
          d="M34 32.5V18.8H39.3V32.1 C39.3 35.6 41.1 37.3 44.6 37.3 C48.1 37.3 49.9 35.6 49.9 32.1 V18.8H55.2V32.5 C55.2 38.6 51.1 41.3 44.6 41.3 C38.1 41.3 34 38.6 34 32.5Z"
          fill="#FF2A1A" />
        <path d="M60 40.5V18.8H65.3V29.5L74.7 18.8H80.8L70.6 29.8 L81.5 40.5H75.3L65.3 30.6V40.5H60Z" fill="#E10600" />
        <path d="M90 40.5V23.1H82.6V18.8H102.7V23.1H95.3V40.5H90Z" fill="#9B0C08" />
        <path d="M107 40.5V18.8H112.3V40.5H107Z" fill="#E10600" />
        <circle cx="140" cy="10" r="4" fill="#9B0C08" />
        <circle cx="152" cy="16" r="4" fill="#E10600" />
        <circle cx="164" cy="10" r="4" fill="#9B0C08" />
      </svg>
    </a>

    <ul class="nav nav-pills flex-column mb-auto gap-2">
      <li class="nav-item">
        <a routerLink="/admin/dashboard" routerLinkActive="active-link"
          class="nav-link text-white-50 d-flex align-items-center py-3 px-3 rounded-4">
          <i class="bi bi-speedometer2 me-3 fs-5"></i>
          Dashboard
        </a>
      </li>
      <li>
        <a routerLink="/admin/users" routerLinkActive="active-link"
          class="nav-link text-white-50 d-flex align-items-center py-3 px-3 rounded-4">
          <i class="bi bi-people me-3 fs-5"></i>
          User Management
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white-50 d-flex align-items-center mt-4 border-top pt-3" routerLink="/student/dashboard"
          routerLinkActive="active-link">
          <i class="bi bi-mortarboard me-3 fs-5"></i>
          Student View
        </a>
      </li>
      <li>
        <a routerLink="/admin/teams" routerLinkActive="active-link"
          class="nav-link text-white-50 d-flex align-items-center py-3 px-3 rounded-4">
          <i class="bi bi-microsoft-teams me-3 fs-5"></i>
          Teams
        </a>
      </li>
      <li>
        <a routerLink="/admin/questions" routerLinkActive="active-link"
          class="nav-link text-white-50 d-flex align-items-center py-3 px-3 rounded-4">
          <i class="bi bi-collection me-3 fs-5"></i>
          Question Bank
        </a>
      </li>
      <li>
        <a routerLink="/admin/exams" routerLinkActive="active-link"
          class="nav-link text-white-50 d-flex align-items-center py-3 px-3 rounded-4">
          <i class="bi bi-journal-check me-3 fs-5"></i>
          Exams
        </a>
      </li>
    </ul>

    <div class="mt-auto p-3 rounded-4 bg-white bg-opacity-10 backdrop-blur border border-white border-opacity-10">
      <div class="d-flex align-items-center">
        <div class="position-relative">
          <img src="https://ui-avatars.com/api/?name=Admin+User&background=6366f1&color=fff" alt="" width="42"
            height="42" class="rounded-circle border border-2 border-white shadow-sm">
          <span class="position-absolute bottom-0 end-0 p-1 bg-success border border-light rounded-circle"></span>
        </div>
        <div class="flex-grow-1 ms-3 overflow-hidden">
          <div class="fw-bold text-truncate">Admin User</div>
          <div class="small text-white-50 text-truncate">Super Admin</div>
        </div>
        <button (click)="logout()" class="btn btn-link text-white-50 ms-1 p-0 hover-white"><i
            class="bi bi-box-arrow-right fs-5"></i></button>
      </div>
    </div>
  </ng-template>

  <!-- Main Content -->
  <div class="flex-grow-1 overflow-auto bg-light position-relative">
    <!-- Topbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom py-3 px-4 sticky-top shadow-sm z-3">
      <div class="container-fluid p-0">
        <div class="d-flex align-items-center">
          <button class="btn btn-light rounded-circle d-lg-none me-3 shadow-sm" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#mobileSidebar">
            <i class="bi bi-list fs-5"></i>
          </button>
          <h5 class="mb-0 fw-bold text-secondary">Dashboard Overview</h5>
        </div>

        <div class="d-flex gap-3 align-items-center">
          <div class="d-none d-md-block text-muted small me-2">
            {{ today | date:'fullDate' }}
          </div>
          <button class="btn btn-light rounded-circle shadow-sm position-relative" style="width: 40px; height: 40px;">
            <i class="bi bi-bell"></i>
            <span
              class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"></span>
          </button>
        </div>
      </div>
    </nav>

    <div class="container-fluid p-4 p-lg-5">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>