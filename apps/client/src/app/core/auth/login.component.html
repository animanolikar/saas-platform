<div class="login-page">
    <div class="container">
        <div class="row g-0 align-items-stretch shadow-lg rounded-4 overflow-hidden"
            style="background: white; min-height: 550px;">

            <!-- LEFT: Brand / Info Panel -->
            <div class="col-lg-6 d-none d-lg-flex login-left text-center">
                <div class="login-left-inner d-flex flex-column align-items-center w-100">
                    <div class="brand mb-4">
                        <svg width="220" height="60" viewBox="0 0 220 56" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 40.5V31.2L3 18.8H9.4L16.9 27.8L24.5 18.8H30.8L19.9 31.2 V40.5H14Z"
                                fill="#E10600" />
                            <path
                                d="M34 32.5V18.8H39.3V32.1 C39.3 35.6 41.1 37.3 44.6 37.3 C48.1 37.3 49.9 35.6 49.9 32.1 V18.8H55.2V32.5 C55.2 38.6 51.1 41.3 44.6 41.3 C38.1 41.3 34 38.6 34 32.5Z"
                                fill="#FF2A1A" />
                            <path
                                d="M60 40.5V18.8H65.3V29.5L74.7 18.8H80.8L70.6 29.8 L81.5 40.5H75.3L65.3 30.6V40.5H60Z"
                                fill="#E10600" />
                            <path d="M90 40.5V23.1H82.6V18.8H102.7V23.1H95.3V40.5H90Z" fill="#9B0C08" />
                            <path d="M107 40.5V18.8H112.3V40.5H107Z" fill="#E10600" />
                            <circle cx="140" cy="10" r="4" fill="#9B0C08" />
                            <circle cx="152" cy="16" r="4" fill="#E10600" />
                            <circle cx="164" cy="10" r="4" fill="#9B0C08" />
                        </svg>
                        <p class="brand-subtitle mt-3">Secure access • Role-based controls • Audit-ready</p>
                    </div>

                    <div class="feature-list">
                        <div class="feature">
                            <i class="bi bi-check2-circle"></i>
                            <div>
                                <div class="feature-title">Secure Authentication</div>
                                <div class="feature-sub">Industry-standard login protection and session handling.</div>
                            </div>
                        </div>

                        <div class="feature">
                            <i class="bi bi-people"></i>
                            <div>
                                <div class="feature-title">Role Based Access</div>
                                <div class="feature-sub">Admins, managers, and staff see only what they need.</div>
                            </div>
                        </div>

                        <div class="feature">
                            <i class="bi bi-journal-text"></i>
                            <div>
                                <div class="feature-title">Activity & Audit Logs</div>
                                <div class="feature-sub">Clear traceability for every action.</div>
                            </div>
                        </div>
                    </div>

                    <div class="login-left-footer">
                        <span class="text-white">© {{ currentYear }} Yukti</span>
                    </div>
                </div>
            </div>

            <!-- RIGHT: Login Card -->
            <div class="col-lg-6 d-flex login-right">
                <div class="login-right-inner w-100">

                    <div class="login-card">
                        <div class="text-center mb-4">
                            <div class="mini-badge mb-3">
                                <i class="bi bi-person-lock"></i>
                            </div>
                            <h2 class="title">Sign in</h2>
                            <p class="subtitle">Use your admin credentials to continue.</p>
                        </div>

                        <div *ngIf="error" class="alert alert-danger d-flex align-items-center gap-2" role="alert">
                            <i class="bi bi-exclamation-triangle-fill"></i>
                            <span class="small">{{ error }}</span>
                        </div>

                        <form (ngSubmit)="onSubmit()" autocomplete="on" novalidate>
                            <!-- Email -->
                            <div class="mb-3">
                                <label for="email" class="form-label">Email</label>
                                <div class="field">
                                    <i class="bi bi-envelope"></i>
                                    <input id="email" name="email" type="email" class="form-control" [(ngModel)]="email"
                                        placeholder="name@example.com" required autocomplete="email" />
                                </div>
                            </div>

                            <!-- Password -->
                            <div class="mb-2">
                                <label for="password" class="form-label">Password</label>
                                <div class="field">
                                    <i class="bi bi-key"></i>
                                    <input id="password" name="password" [type]="showPassword ? 'text' : 'password'"
                                        class="form-control" [(ngModel)]="password" placeholder="Enter your password"
                                        required autocomplete="current-password" />
                                    <button type="button" class="toggle" (click)="showPassword = !showPassword"
                                        [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'">
                                        <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Remember + Forgot -->
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rememberMe">
                                    <label class="form-check-label" for="rememberMe">Remember me</label>
                                </div>
                                <a routerLink="/forgot-password" class="link">Forgot password?</a>
                            </div>

                            <!-- Submit -->
                            <button type="submit" class="btn btn-primary w-100 btn-lg" [disabled]="loading">
                                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                                {{ loading ? 'Signing in...' : 'Sign in' }}
                            </button>

                            <!-- Small trust message -->
                            <div class="trust mt-4">
                                <i class="bi bi-lock-fill"></i>
                                <span>Secure login. Your data is protected.</span>
                            </div>
                        </form>
                    </div>

                    <!-- Mobile footer -->
                    <div class="mobile-footer d-lg-none bg-black rounded-3 p-2 mt-3 shadow-sm">
                        <span class="text-white small">© {{ currentYear }} Yukti</span>
                    </div>

                </div>
            </div>

        </div>
        <!-- Hidden logout button for accessibility if needed, but the modal handles interaction -->

        <!-- Logout Confirmation Modal (Bootstrap) -->
        <div class="modal fade show" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);"
            *ngIf="showLogoutDialog" role="dialog" aria-modal="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content rounded-4 shadow-lg border-0">
                    <div class="modal-body text-center p-5">
                        <div class="mb-4 text-warning">
                            <i class="bi bi-box-arrow-right display-1"></i>
                        </div>
                        <h3 class="mb-3 fw-bold">Already Signed In</h3>
                        <p class="text-muted mb-4">
                            You are currently logged in as <strong>{{ currentUser?.firstName || currentUser?.email
                                }}</strong>.
                            <br>Do you want to sign out?
                        </p>
                        <div class="d-grid gap-3 col-8 mx-auto">
                            <button type="button" class="btn btn-danger btn-lg rounded-pill" (click)="confirmLogout()">
                                Yes, Sign Out
                            </button>
                            <button type="button" class="btn btn-light btn-lg rounded-pill" (click)="cancelLogout()">
                                No, Go to Dashboard
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>